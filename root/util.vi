
/// Swap the values in two references.
/// ```vi
/// let a = 1;
/// let b = 2;
/// swap(&a, &b);
/// a // 2
/// b // 1
/// ```
pub fn swap[T](&a: &T, &b: &T) {
  (a, b) = (b, a);
}

/// Update the value in a reference and return the old value.
/// ```vi
/// let data = 123;
/// let old = replace(&data, 456);
/// old // 123
/// data // 456
/// ```
pub fn replace[T](&a: &T, b: T) -> T {
  swap(&a, &b);
  b
}

pub fn black_box[T](value: T) -> T {
  inline_ivy! (value <- value) -> T { #[value] }
}
